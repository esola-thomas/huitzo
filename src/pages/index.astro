---
import Layout from '~/layouts/PageLayout.astro';
import IntelligencePackCard from '~/components/IntelligencePackCard.astro';
import { getIntelligencePacksByStatus, getIntelligencePackStats } from '~/utils/intelligence-packs';

// Get the first active pack for featured display
const activePacks = await getIntelligencePacksByStatus('active');
const featuredPack = activePacks[0] || null;

// Compute safe stats for hero section
const packStats = await getIntelligencePackStats();
const packCount = packStats?.total ?? 0;
const packsInDev = packStats?.comingSoon + packStats?.beta || 0;

// Find current milestone from roadmap
const roadmapModule = await import('~/data/roadmap.json');
const currentMilestone = roadmapModule.default.milestones.find(m => m.status === 'in-progress');

const metadata = {
  title: 'Huitzo - Intelligence on Demand',
  description: 'Huitzo intelligence packs analyze your data and deliver actionable insights so you decide faster and smarter.',
};
---

<Layout metadata={metadata}>
  <!-- Hero Section -->
  <section class="py-20 lg:py-32">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-4xl lg:text-6xl font-bold mb-6 leading-normal lg:leading-tight">
          Your Competition Has Data.
          <span class="text-gradient animated-gradient block">You'll Have Intelligence on Demand.</span>
        </h1>

        <p class="text-xl text-muted mb-6 leading-relaxed max-w-3xl mx-auto">
          Huitzo intelligence packs analyze your data and deliver actionable insights so you can decide faster and smarter.
        </p>

        <div class="bg-[var(--aw-color-bg-secondary)]/60 border border-gray-700 rounded-lg px-6 py-5 mb-8 max-w-2xl mx-auto text-left">
          <p class="text-sm uppercase tracking-[0.3em] text-primary font-semibold mb-3">Why Now</p>
          <p class="text-base text-muted leading-relaxed">
            The world generates 402 million terabytes of data every day. Without the right tools, it's just noise. With Huitzo, it becomes your competitive edge.
          </p>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 justify-center mb-12">
          <a href="https://cli.huitzo.com" target="_blank" rel="noopener" class="btn-primary">
            Get Started ‚Üí
          </a>
          <a href="/intelligence-packs" class="btn-secondary">
            Explore Intelligence Packs
          </a>
        </div>

        <!-- Key Stats -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 pt-8 border-t border-gray-700 max-w-2xl mx-auto">
          <div>
            <div class="text-2xl font-bold text-primary font-mono">{packCount}</div>
            <div class="text-sm text-muted">Intelligence packs</div>
          </div>
          <div>
            <div class="text-2xl font-bold text-primary font-mono">{packsInDev}</div>
            <div class="text-sm text-muted">In development</div>
          </div>
          <div>
            <div class="text-2xl font-bold text-primary font-mono">May '26</div>
            <div class="text-sm text-muted">Public launch</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- The Problem Section -->
  <section class="py-20 bg-[var(--aw-color-bg-secondary)]/50">
    <div class="container mx-auto px-4">
      <div class="max-w-5xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-3xl lg:text-4xl font-bold mb-4">
            While You're Drowning in Data, Your Competitors Are Making Moves
          </h2>
          <p class="text-lg text-muted">
            Too much information. Not enough clarity. Sound familiar?
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="bg-[var(--aw-color-bg-secondary)] border border-gray-700 rounded-xl p-6">
            <div class="text-3xl mb-4">üè¢</div>
            <h3 class="text-lg font-semibold mb-3">The Competitive Gap</h3>
            <p class="text-sm text-muted leading-relaxed">
              Your competitors have data teams and expensive consultants. You have spreadsheets and guesswork. The gap widens every day.
            </p>
          </div>
          <div class="bg-[var(--aw-color-bg-secondary)] border border-gray-700 rounded-xl p-6">
            <div class="text-3xl mb-4">ü§Ø</div>
            <h3 class="text-lg font-semibold mb-3">Decision Paralysis</h3>
            <p class="text-sm text-muted leading-relaxed">
              More data should lead to better decisions. Instead, it creates more confusion. You're stuck analyzing instead of acting.
            </p>
          </div>
          <div class="bg-[var(--aw-color-bg-secondary)] border border-gray-700 rounded-xl p-6">
            <div class="text-3xl mb-4">‚è≥</div>
            <h3 class="text-lg font-semibold mb-3">Analysis Fatigue</h3>
            <p class="text-sm text-muted leading-relaxed">
              By the time you find the insight, the opportunity has passed. Manual analysis can't keep pace with today's market.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- The Solution Section -->
  <section class="py-20 bg-[var(--aw-color-bg-secondary)]">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-3xl lg:text-4xl font-bold mb-4">
            Huitzo: Your On-Demand Analysis Team
          </h2>
          <p class="text-lg text-muted max-w-3xl mx-auto">
            Each intelligence pack specializes in a domain. You get the answers. No team required.
          </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-start">
          <div class="space-y-6">
            <p class="text-base text-muted leading-relaxed">
              Right now, there are two types of decision-makers: those with expensive analytics teams, and everyone else flying blind. Huitzo closes that gap.
            </p>
            <p class="text-base text-muted leading-relaxed">
              Our intelligence packs do the heavy lifting by analyzing data, spotting patterns, and delivering clear recommendations. You stay focused on what matters: making the call.
            </p>
            <p class="text-base text-muted leading-relaxed">
              Start with one intelligence pack. Add more as your needs grow. Each one is designed to deliver specific, actionable outputs you can use immediately.
            </p>
          </div>
          <div class="space-y-6">
            <div class="bg-[var(--aw-color-bg-page)] border border-gray-700 rounded-2xl p-6">
              <h3 class="text-xl font-semibold mb-2">What We Do</h3>
              <p class="text-sm text-muted leading-relaxed">
                Transform raw data into clear recommendations. No dashboards to build and no reports to generate. You just get answers when you need them.
              </p>
            </div>
            <div class="bg-[var(--aw-color-bg-page)] border border-primary/50 border-2 rounded-2xl p-6">
              <h3 class="text-xl font-semibold text-primary mb-2">The Huitzo Difference</h3>
              <p class="text-sm text-muted leading-relaxed">
                We don't just analyze; we interpret, contextualize, and recommend. Each intelligence pack understands your goals and delivers personalized insights.
              </p>
            </div>
            <div class="bg-[var(--aw-color-bg-page)] border border-gray-700 rounded-2xl p-6">
              <h3 class="text-xl font-semibold mb-2">How It Works</h3>
              <p class="text-sm text-muted leading-relaxed">
                Ask a question, get an answer. Our intelligence packs analyze your data in the background and deliver results you can act on in seconds, not days.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Who Benefits -->
  <section class="py-20 bg-[var(--aw-color-bg-secondary)]/60">
    <div class="container mx-auto px-4">
      <div class="max-w-5xl mx-auto text-center mb-14">
        <h2 class="text-3xl lg:text-4xl font-bold mb-4">Built for Decision-Makers</h2>
        <p class="text-lg text-muted">
          Whether you're managing a portfolio or running a business, Huitzo helps you move faster.
        </p>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 max-w-5xl mx-auto">
        <div class="bg-[var(--aw-color-bg-secondary)] border border-gray-700 rounded-xl px-5 py-6 text-center">
          <div class="text-2xl mb-3">üìà</div>
          <h3 class="text-lg font-semibold mb-2">Investors</h3>
          <p class="text-sm text-muted">Get personalized risk analysis and market insights without the guesswork.</p>
        </div>
        <div class="bg-[var(--aw-color-bg-secondary)] border border-gray-700 rounded-xl px-5 py-6 text-center">
          <div class="text-2xl mb-3">üöÄ</div>
          <h3 class="text-lg font-semibold mb-2">Founders</h3>
          <p class="text-sm text-muted">Spot trends and make data-backed decisions without hiring analysts.</p>
        </div>
        <div class="bg-[var(--aw-color-bg-secondary)] border border-gray-700 rounded-xl px-5 py-6 text-center">
          <div class="text-2xl mb-3">üè™</div>
          <h3 class="text-lg font-semibold mb-2">Small Businesses</h3>
          <p class="text-sm text-muted">Access the same analytical power as enterprise teams at a fraction of the cost.</p>
        </div>
        <div class="bg-[var(--aw-color-bg-secondary)] border border-gray-700 rounded-xl px-5 py-6 text-center">
          <div class="text-2xl mb-3">üß†</div>
          <h3 class="text-lg font-semibold mb-2">Anyone Stuck</h3>
          <p class="text-sm text-muted">Break through decision paralysis with tools designed to help you think.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- How It Works - Plugin Outputs -->
  <section class="py-20">
    <div class="container mx-auto px-4">
      <div class="max-w-5xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-3xl lg:text-4xl font-bold mb-4">From Question to Answer in Seconds</h2>
          <p class="text-lg text-muted">
            Ask what you need. Get what matters.
          </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <!-- Financial Analysis Output -->
          <div class="bg-[var(--aw-color-bg-secondary)] border border-gray-700 rounded-2xl overflow-hidden">
            <div class="bg-emerald-500/10 border-b border-emerald-500/30 px-6 py-4">
              <div class="flex items-center gap-3">
                <span class="text-2xl">üí∞</span>
                <div>
                  <h3 class="font-semibold text-emerald-400">Financial Analysis</h3>
                  <p class="text-xs text-muted">Available now</p>
                </div>
              </div>
            </div>
            <div class="p-6">
              <div class="mb-4">
                <p class="text-sm text-muted mb-2">You ask:</p>
                <p class="text-base font-medium">"Should I rebalance my portfolio?"</p>
              </div>
              <div class="border-t border-gray-700 pt-4">
                <p class="text-sm text-muted mb-3">You get:</p>
                <ul class="space-y-2 text-sm">
                  <li class="flex items-start gap-2">
                    <span class="text-emerald-400">‚úì</span>
                    <span>Risk profile analysis matched to your criteria.</span>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-emerald-400">‚úì</span>
                    <span>Real-time market signals (VIX, sector trends).</span>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-emerald-400">‚úì</span>
                    <span>A personalized recommendation with clear reasoning.</span>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-emerald-400">‚úì</span>
                    <span>Automated weekly briefings delivered to your inbox.</span>
                  </li>
                </ul>
              </div>
              <div class="mt-4 pt-4 border-t border-gray-700">
                <a href="/intelligence-packs/financial" class="text-sm text-primary hover:underline">Learn more ‚Üí</a>
              </div>
            </div>
          </div>

          <!-- Rubber Ducky Output -->
          <div class="bg-[var(--aw-color-bg-secondary)] border border-gray-700 rounded-2xl overflow-hidden">
            <div class="bg-amber-500/10 border-b border-amber-500/30 px-6 py-4">
              <div class="flex items-center gap-3">
                <span class="text-2xl">ü¶Ü</span>
                <div>
                  <h3 class="font-semibold text-amber-400">Rubber Ducky</h3>
                  <p class="text-xs text-muted">Available now</p>
                </div>
              </div>
            </div>
            <div class="p-6">
              <div class="mb-4">
                <p class="text-sm text-muted mb-2">You say:</p>
                <p class="text-base font-medium">"I'm stuck on this decision and keep going in circles..."</p>
              </div>
              <div class="border-t border-gray-700 pt-4">
                <p class="text-sm text-muted mb-3">You get:</p>
                <ul class="space-y-2 text-sm">
                  <li class="flex items-start gap-2">
                    <span class="text-amber-400">‚úì</span>
                    <span>Guided questions that help you think clearly</span>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-amber-400">‚úì</span>
                    <span>A partner that asks rather than tells</span>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-amber-400">‚úì</span>
                    <span>Conversation summary with your insights highlighted</span>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-amber-400">‚úì</span>
                    <span>Clarity on what you actually want</span>
                  </li>
                </ul>
              </div>
              <div class="mt-4 pt-4 border-t border-gray-700">
                <a href="/intelligence-packs/rubber-ducky" class="text-sm text-primary hover:underline">Learn more ‚Üí</a>
              </div>
            </div>
          </div>
        </div>

        <p class="text-center text-sm text-muted mt-8">
          A human analyst takes three days. Huitzo delivers in three seconds.
        </p>
      </div>
    </div>
  </section>

  <!-- Project Status Section -->
  <section class="py-20">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-3xl lg:text-4xl font-bold mb-4">
            Building in Public
          </h2>
          <p class="text-lg text-muted">
            We're transparent about where we are and where we're headed. Join us on the journey.
          </p>
        </div>

        <div class="card text-center">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center text-left md:text-left">
            <div class="space-y-4">
              <h3 class="text-xl font-semibold">Where We Are Now</h3>
              <p class="text-primary font-medium">Onboarding first users and expanding our intelligence pack catalog</p>

              {currentMilestone && (
                <div class="bg-[var(--aw-color-bg-secondary)] border border-gray-700 rounded-xl p-5">
                  <h4 class="text-lg font-semibold mb-3">{currentMilestone.title}</h4>
                  <div class="flex items-center justify-between mb-2">
                    <span class="text-sm text-muted">Progress</span>
                    <span class="text-sm font-mono text-primary">{currentMilestone.progress}%</span>
                  </div>
                  <div class="progress-bar mb-4">
                    <div class="progress-fill" style={`width: ${currentMilestone.progress}%`}></div>
                  </div>
                  {currentMilestone.targetDate && (
                    <p class="text-sm text-muted">Target: {new Date(currentMilestone.targetDate).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
                  )}
                </div>
              )}

              <p class="text-sm text-muted">
                Beta partners receive lifetime founder benefits and direct influence over roadmap priorities.
              </p>
            </div>

            <div>
              <h3 class="text-xl font-semibold mb-4">Milestones</h3>
              <div class="space-y-3 text-sm">
                <div class="flex items-center justify-between">
                  <span class="text-muted">‚úì Project Kickoff</span>
                  <span class="text-[var(--aw-color-success)]">Oct 2025</span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-muted">‚úì Core Platform MVP</span>
                  <span class="text-[var(--aw-color-success)]">Nov 2025</span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-muted">‚è≥ Financial Intelligence Beta</span>
                  <span class="text-muted">Jan 2026</span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-muted">‚è≥ 3+ Intelligence Packs</span>
                  <span class="text-muted">Jan 2026</span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-muted">‚óã Public Launch</span>
                  <span class="text-muted">May 2026</span>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-8 pt-6 border-t border-gray-700 space-y-4">
            <a href="/roadmap" class="btn-secondary">
              Inspect the Roadmap ‚Üí
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Intelligence Packs Section -->
  <section class="py-20 bg-[var(--aw-color-bg-secondary)]">
    <div class="container mx-auto px-4">
      <div class="max-w-5xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-3xl lg:text-4xl font-bold mb-4">
            Intelligence Packs for Every Challenge
          </h2>
          <p class="text-lg text-muted">
            Intelligence-as-a-Service, delivered one pack at a time. Start with one. Expand as you grow.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto">
          {featuredPack && (
            <IntelligencePackCard pack={featuredPack} showFullDescription={false} />
          )}
          {activePacks[1] && (
            <IntelligencePackCard pack={activePacks[1]} showFullDescription={false} />
          )}
        </div>

        <div class="text-center mt-8">
          <a href="/intelligence-packs" class="btn-secondary">
            View All Intelligence Packs ‚Üí
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA Section -->
  <section class="py-20">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-3xl lg:text-4xl font-bold mb-6">
          Ready to Stop Guessing?
        </h2>
        <p class="text-lg text-muted mb-8">
          Join the early adopters who are already making faster, smarter decisions with Huitzo.
        </p>

        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="https://cli.huitzo.com" target="_blank" rel="noopener" class="btn-primary">
            Get Started ‚Üí
          </a>
          <a href="/intelligence-packs" class="btn-secondary">
            Explore Intelligence Packs
          </a>
        </div>

        <!-- Contact Info -->
        <div class="mt-12 pt-8 border-t border-gray-700">
          <p class="text-sm text-muted">
            Questions? Reach out at
            <a href="mailto:huitzo@solathomas.com" class="text-primary hover:underline">huitzo@solathomas.com</a>
          </p>
        </div>
      </div>
    </div>
  </section>
</Layout>
